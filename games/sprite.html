<!DOCTYPE html>

<head></head>
    <title>Sprite Practice</title>
  <style>
    #canvas {
      border-width: 1px;
    }
  </style>
</head>


<body style="overflow: hidden;width:100%;height:100%;padding:0%;
      margin:0%;border:0px;">
    <canvas id="coinAnimation" tabindex="1">Your browser does not support the HTML5 canvas tag.</canvas>
    </body>
    
<script>
var coinImage = new Image();
coinImage.src = "images/coin-sprite-animation.png";

var canvas = document.getElementById("coinAnimation");
canvas.width = 100;
canvas.height = 100;

var coin = sprite({
    context: canvas.getContext("2d"),
    width: 100,
    height: 100,
    image: coinImage
});

coin.render();



// makes sprites, this is the important bit
function sprite (options) {
				
    var that = {},
        frameIndex = 0,
        tickCount = 0,
        ticksPerFrame = 0,
        numberOfFrames = options.numberOfFrames || 1,
	loop = options.loop;
    
    that.render = function () {

        // Draw the animation
        that.context.drawImage(
           that.image,
           0,
           0,
           that.width,
           that.height,
           0,
           0,
           that.width,
           that.height);
    };
    that.update = function () {

        tickCount += 1;
			
        if (tickCount > ticksPerFrame) {
        
            tickCount = 0;
        	
            // If the current frame index is in range
            if (frameIndex < numberOfFrames - 1) {	
                // Go to the next frame
                frameIndex += 1;
            } else if (that.loop) {
                frameIndex = 0;
            }	
        }
    }; 

    return that;
}

// The game loop 
function gameLoop () {

  window.requestAnimationFrame(gameLoop);
  
  coin.update();
  coin.render();
}

// Start the game loop as soon as the sprite sheet is loaded
coinImage.addEventListener("load", gameLoop);


</script>
